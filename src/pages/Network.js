import * as React from 'react';
import { useState, useEffect } from 'react';
import Graph from "react-graph-vis";

export default function Network() {
    const [data, setData] = useState([]);
    useEffect(() => {
      fetch('https://raw.githubusercontent.com/nsuman/twitdata/master/users_profile/users_profile.json')
      .then((response) => response.json())
      .then((json) => setData(json))
      .catch((error) => {
        console.log('fetch data failed', error);
      });
    }, []);

    const nodes = []
    const edges =[{"from": "gbudhathoki", "to": "Umesh_Chauhan", "physics": true, "hidden": false}, {"from": "gbudhathoki", "to": "MohnaAnsari", "physics": true, "hidden": false}, {"from": "gbudhathoki", "to": "NEPALNPC", "physics": true, "hidden": false}, {"from": "gbudhathoki", "to": "DahalTbd", "physics": true, "hidden": false}, {"from": "gbudhathoki", "to": "Bijaysspaudel", "physics": true, "hidden": false}, {"from": "gbudhathoki", "to": "rameshore", "physics": true, "hidden": false}, {"from": "gbudhathoki", "to": "MohanBanjade", "physics": true, "hidden": false}, {"from": "gbudhathoki", "to": "MoHAGunaso", "physics": true, "hidden": false}, {"from": "gbudhathoki", "to": "NepalEmbassyUK", "physics": true, "hidden": false}, {"from": "gbudhathoki", "to": "Swaroop_Raj1978", "physics": true, "hidden": false}, {"from": "gbudhathoki", "to": "Vijaykumarko", "physics": true, "hidden": false}, {"from": "gbudhathoki", "to": "PresidentofNP", "physics": true, "hidden": false}, {"from": "gbudhathoki", "to": "eonmoscow", "physics": true, "hidden": false}, {"from": "gbudhathoki", "to": "akhileshU", "physics": true, "hidden": false}, {"from": "gbudhathoki", "to": "achyutbulbul", "physics": true, "hidden": false}, {"from": "gbudhathoki", "to": "basantabasnet", "physics": true, "hidden": false}, {"from": "gbudhathoki", "to": "Babitasharmaa", "physics": true, "hidden": false}, {"from": "gbudhathoki", "to": "theanfaofficial", "physics": true, "hidden": false}, {"from": "gbudhathoki", "to": "nepal_of", "physics": true, "hidden": false}, {"from": "gbudhathoki", "to": "tikaramyatri", "physics": true, "hidden": false}, {"from": "gbudhathoki", "to": "KoiralaBhagawan", "physics": true, "hidden": false}, {"from": "gbudhathoki", "to": "kundadixit", "physics": true, "hidden": false}, {"from": "gbudhathoki", "to": "speaker_nepal", "physics": true, "hidden": false}, {"from": "gbudhathoki", "to": "kirannepal", "physics": true, "hidden": false}, {"from": "gbudhathoki", "to": "rabimishra", "physics": true, "hidden": false}, {"from": "gbudhathoki", "to": "ameetdhakal", "physics": true, "hidden": false}, {"from": "gbudhathoki", "to": "mkoirala", "physics": true, "hidden": false}, {"from": "gbudhathoki", "to": "ParliamentNepal", "physics": true, "hidden": false}, {"from": "gbudhathoki", "to": "NepalRastraBank", "physics": true, "hidden": false}, {"from": "gbudhathoki", "to": "Teknarayan_", "physics": true, "hidden": false}, {"from": "gbudhathoki", "to": "SanjeevSatgainy", "physics": true, "hidden": false}, {"from": "gbudhathoki", "to": "PokharelBhojraj", "physics": true, "hidden": false}, {"from": "gbudhathoki", "to": "SwarnimWagle", "physics": true, "hidden": false}, {"from": "gbudhathoki", "to": "pmngeneva", "physics": true, "hidden": false}, {"from": "gbudhathoki", "to": "daman_nath", "physics": true, "hidden": false}, {"from": "gbudhathoki", "to": "nilacharya", "physics": true, "hidden": false}, {"from": "gbudhathoki", "to": "AdhikariMaha", "physics": true, "hidden": false}, {"from": "gbudhathoki", "to": "MoeapG", "physics": true, "hidden": false}, {"from": "gbudhathoki", "to": "BhagirathYogi", "physics": true, "hidden": false}, {"from": "gbudhathoki", "to": "narayanwagle", "physics": true, "hidden": false}, {"from": "gbudhathoki", "to": "salokya", "physics": true, "hidden": false}, {"from": "gbudhathoki", "to": "chefsantoshshah", "physics": true, "hidden": false}, {"from": "gbudhathoki", "to": "YugPathak", "physics": true, "hidden": false}, {"from": "gbudhathoki", "to": "YubarajGhimire3", "physics": true, "hidden": false}, {"from": "gbudhathoki", "to": "RaameshKoirala", "physics": true, "hidden": false}, {"from": "gbudhathoki", "to": "gunaraj", "physics": true, "hidden": false}, {"from": "gbudhathoki", "to": "lendaai", "physics": true, "hidden": false}, {"from": "gbudhathoki", "to": "Hello_MOALD", "physics": true, "hidden": false}, {"from": "gbudhathoki", "to": "belakoboli", "physics": true, "hidden": false}, {"from": "gbudhathoki", "to": "ShresthaSubina", "physics": true, "hidden": false}, {"from": "gbudhathoki", "to": "paras77", "physics": true, "hidden": false}, {"from": "gbudhathoki", "to": "MumaRamKhanal", "physics": true, "hidden": false}, {"from": "gbudhathoki", "to": "SuryaRAcharya", "physics": true, "hidden": false}, {"from": "gbudhathoki", "to": "mowcsc_nepal", "physics": true, "hidden": false}, {"from": "gbudhathoki", "to": "gaunkomanchhey", "physics": true, "hidden": false}, {"from": "TheAnnaExpress", "to": "kathmandupost", "physics": true, "hidden": false}, {"from": "TheAnnaExpress", "to": "himalayahd", "physics": true, "hidden": false}, {"from": "TheAnnaExpress", "to": "Himal_Khabar", "physics": true, "hidden": false}, {"from": "TheAnnaExpress", "to": "Online_khabar", "physics": true, "hidden": false}, {"from": "TheAnnaExpress", "to": "Rato_pati", "physics": true, "hidden": false}, {"from": "TheAnnaExpress", "to": "thehimalayan", "physics": true, "hidden": false}, {"from": "TheAnnaExpress", "to": "setopati", "physics": true, "hidden": false}, {"from": "Annapurna_Post", "to": "kathmandupost", "physics": true, "hidden": false}, {"from": "Annapurna_Post", "to": "himalayahd", "physics": true, "hidden": false}, {"from": "Annapurna_Post", "to": "Himal_Khabar", "physics": true, "hidden": false}, {"from": "Annapurna_Post", "to": "Online_khabar", "physics": true, "hidden": false}, {"from": "Annapurna_Post", "to": "Rato_pati", "physics": true, "hidden": false}, {"from": "Annapurna_Post", "to": "thehimalayan", "physics": true, "hidden": false}, {"from": "Annapurna_Post", "to": "TheAnnaExpress", "physics": true, "hidden": false}, {"from": "Annapurna_Post", "to": "setopati", "physics": true, "hidden": false}, {"from": "basantabasnet", "to": "SanjeevSatgainy", "physics": false, "hidden": false}, {"from": "akhileshU", "to": "SanjeevSatgainy", "physics": true, "hidden": false}, {"from": "SanjeevSatgainy", "to": "Umesh_Chauhan", "physics": true, "hidden": false}, {"from": "SanjeevSatgainy", "to": "DahalTbd", "physics": true, "hidden": false}, {"from": "SanjeevSatgainy", "to": "Vijaykumarko", "physics": true, "hidden": false}, {"from": "SanjeevSatgainy", "to": "akhileshU", "physics": true, "hidden": false}, {"from": "SanjeevSatgainy", "to": "kundadixit", "physics": true, "hidden": false}, {"from": "SanjeevSatgainy", "to": "kirannepal", "physics": true, "hidden": false}, {"from": "SanjeevSatgainy", "to": "ameetdhakal", "physics": true, "hidden": false}, {"from": "SanjeevSatgainy", "to": "Teknarayan_", "physics": true, "hidden": false}, {"from": "SanjeevSatgainy", "to": "BhagirathYogi", "physics": true, "hidden": false}, {"from": "SanjeevSatgainy", "to": "salokya", "physics": true, "hidden": false}, {"from": "SanjeevSatgainy", "to": "gunaraj", "physics": true, "hidden": false}, {"from": "Umesh_Chauhan", "to": "Babitasharmaa", "physics": false, "hidden": false}, {"from": "Umesh_Chauhan", "to": "mkoirala", "physics": false, "hidden": false}, {"from": "RaameshKoirala", "to": "MohnaAnsari", "physics": true, "hidden": false}, {"from": "RaameshKoirala", "to": "DahalTbd", "physics": true, "hidden": false}, {"from": "RaameshKoirala", "to": "Swaroop_Raj1978", "physics": true, "hidden": false}, {"from": "RaameshKoirala", "to": "Vijaykumarko", "physics": true, "hidden": false}, {"from": "RaameshKoirala", "to": "akhileshU", "physics": true, "hidden": false}, {"from": "RaameshKoirala", "to": "achyutbulbul", "physics": true, "hidden": false}, {"from": "RaameshKoirala", "to": "kundadixit", "physics": true, "hidden": false}, {"from": "RaameshKoirala", "to": "kirannepal", "physics": true, "hidden": false}, {"from": "RaameshKoirala", "to": "rabimishra", "physics": true, "hidden": false}, {"from": "RaameshKoirala", "to": "Teknarayan_", "physics": true, "hidden": false}, {"from": "RaameshKoirala", "to": "SanjeevSatgainy", "physics": true, "hidden": false}, {"from": "RaameshKoirala", "to": "daman_nath", "physics": true, "hidden": false}, {"from": "RaameshKoirala", "to": "nilacharya", "physics": true, "hidden": false}, {"from": "RaameshKoirala", "to": "narayanwagle", "physics": true, "hidden": false}, {"from": "RaameshKoirala", "to": "belakoboli", "physics": true, "hidden": false}, {"from": "RaameshKoirala", "to": "ShresthaSubina", "physics": true, "hidden": false}, {"from": "RaameshKoirala", "to": "SuryaRAcharya", "physics": true, "hidden": false}, {"from": "RaameshKoirala", "to": "gaunkomanchhey", "physics": true, "hidden": false}, {"from": "sudheerktm", "to": "Babitasharmaa", "physics": true, "hidden": false}, {"from": "sudheerktm", "to": "mkoirala", "physics": true, "hidden": false}, {"from": "Himal_Khabar", "to": "himalayahd", "physics": true, "hidden": false}, {"from": "Himal_Khabar", "to": "kundadixit", "physics": true, "hidden": false}, {"from": "Himal_Khabar", "to": "Online_khabar", "physics": true, "hidden": false}, {"from": "Himal_Khabar", "to": "Rato_pati", "physics": true, "hidden": false}, {"from": "Himal_Khabar", "to": "SanjeevSatgainy", "physics": true, "hidden": false}, {"from": "Himal_Khabar", "to": "setopati", "physics": true, "hidden": false}, {"from": "MofaNepal", "to": "nepal_of", "physics": false, "hidden": false}, {"from": "hello_sarkar", "to": "MoHAGunaso", "physics": true, "hidden": false}, {"from": "hello_sarkar", "to": "NepalEmbassyUK", "physics": true, "hidden": false}, {"from": "hello_sarkar", "to": "PSC_Nepal", "physics": true, "hidden": false}, {"from": "hello_sarkar", "to": "dsmpci", "physics": true, "hidden": false}, {"from": "hello_sarkar", "to": "MoeapG", "physics": true, "hidden": false}, {"from": "hello_sarkar", "to": "Hello_MOALD", "physics": true, "hidden": false}, {"from": "hello_sarkar", "to": "moha_nepal", "physics": true, "hidden": false}, {"from": "hello_sarkar", "to": "mowcsc_nepal", "physics": true, "hidden": false}]
     if (data) {
      data.forEach(element => {
        nodes.push({
          id: element.username,
          shape: 'circularImage',
          value: element.followers_count,
          image: element.profile_image_url.replace('_normal', ''),
          scaling: {
            customScalingFunction: function (min,max,total,value) {
              if (max === min) {
                return 0.5;
              }
              else {
                return value/ total;
              }
            },
            max: 2000,
            min: 25



          },
        })
      });

      data.slice(0, 30).forEach((element) => {
        edges.push({
          to: data[Math.floor(Math.random() * data.length)].username,
          from: data[Math.floor(Math.random() * data.length)].username
        })
      })
    }

  return (
 
      <Graph graph={{ nodes: nodes, edges: edges }} key={Math.random()} />
  );
}